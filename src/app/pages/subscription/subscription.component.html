<div class="flex justify-between items-center">
  <h1 mat-dialog-title class="mb-2 !pb-0 !font-semibold">{{data.name}}</h1>
  <div mat-dialog-actions>
    <button mat-icon-button (click)="onClose()">
    <mat-icon>close</mat-icon>
    </button>
  </div>
</div>

<div mat-dialog-content class="!mb-4 !py-0">
  <p class="text-base">Subscriptions - <span [ngClass]="{'text-[red]': true}">
    </span>{{data | offerStatus}}
  </p>
</div>

<hr>

<div class="grid-container">
  <ng-container *ngIf="loading && !error; else subCards">
    <div class="p-4 bg-gray-100 rounded-lg flex flex-col space-y-2 animate-pulse"  *ngFor="let n of [1,2,3,4]">
      <div class="flex items-center space-x-2">
        <div class="w-8 h-8 bg-gray-300 rounded-full"></div>
        <div class="flex-1 h-4 bg-gray-300 rounded"></div>
      </div>
      <div class="h-4 ml-5 bg-gray-300 rounded w-1/2"></div>
    </div>
  </ng-container>

  <ng-template #subCards>
    <ng-container  *ngIf="subscriptions.length > 0 && !error; else noSubOrError">
  <div class="card" *ngFor="let subscription of subscriptions">
    <div class="card-header">
      <div [ngSwitch]="subscription.type" class="text-center">
        <div *ngSwitchCase="'INTERNET'" class=" bg-blue icon-container">
          <mat-icon>language</mat-icon>
        </div>
        <div *ngSwitchCase="'TELEPHONY'" class="bg-green icon-container">
          <mat-icon>call</mat-icon>
        </div>
        <div *ngSwitchCase="'MOBILE'" class="bg-pink icon-container">
          <mat-icon>phone_iphone</mat-icon>
        </div>
        <div *ngSwitchCase="'TELEVISION'" class="bg-blue icon-container">
          <mat-icon>desktop_windows</mat-icon>
        </div>
        <div *ngSwitchDefault>
          <mat-icon>world</mat-icon>
        </div>
      </div>
      <div>
        <h3>{{ subscription.name }}</h3>

        <div class="usage-details">
          <div *ngFor="let usage of subscription.usage">
            <p>{{ usage.type }}: {{ usage.used }} / {{ usage.limit }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>
</ng-template>

<ng-template #noSubOrError>
  <ng-container *ngIf="!error; else errorTemplate">
    <div class="text-center flex flex-col items-center my-[5vh] justify-center text-sm text-gray-500">
      <img src="empty-box.png" width="80" alt="empty">
      Sorry, no subscriptions are available at the moment.
    </div>
  </ng-container>

  <ng-template #errorTemplate>
    <div class="text-center flex flex-col items-center my-[5vh] justify-center text-sm text-gray-500">
      <img src="error-state.png" width="80" alt="error-state">
      {{error}}
    </div>
  </ng-template>
</ng-template>



</div>

